(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[78],{537:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(9946).A)("Battery",[["rect",{width:"16",height:"10",x:"2",y:"7",rx:"2",ry:"2",key:"1w10f2"}],["line",{x1:"22",x2:"22",y1:"11",y2:"13",key:"4dh1rd"}]])},2355:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(9946).A)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},3391:(e,t,r)=>{Promise.resolve().then(r.bind(r,4269))},4269:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var a=r(5155),s=r(2115),l=r(5695),n=r(6517),o=r(537),i=r(2355),c=r(9946);let d=(0,c.A)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),m=(0,c.A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),x=(0,c.A)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);function u(){let e=(0,l.useRouter)(),[t,r]=(0,s.useState)([]),[c,u]=(0,s.useState)(""),[h,g]=(0,s.useState)(!1),[p,y]=(0,s.useState)(null),[b,f]=(0,s.useState)(""),v=(0,s.useRef)(null),j=()=>{let e=new Date,t=e.getHours(),r=e.getMinutes().toString().padStart(2,"0"),a=t>=12?"PM":"AM";t%=12,t=t||12,f("".concat(t,":").concat(r," ").concat(a))};s.useEffect(()=>{j();let e=setInterval(j,6e4);return()=>clearInterval(e)},[]);let N=e=>{r(t=>t.filter((t,r)=>r!==e))},k=async()=>{if(0===t.length){y("Please upload at least one image");return}g(!0),y(null);let r=new FormData;t.forEach(e=>{r.append("images",e)}),r.append("context",c);try{let t=await fetch("/api/upload",{method:"POST",body:r}),a=await t.json();if(!t.ok)throw Error(a.error||"Upload failed");try{localStorage.setItem("conversationAnalysis",a.analysis),e.push("/conversation")}catch(e){console.error("Error storing analysis data:",e),y("Failed to process analysis data. Please try again.")}}catch(e){console.error("Error during image analysis:",e),y(e instanceof Error?e.message:"An unknown error occurred")}finally{g(!1)}};return(0,a.jsxs)("div",{className:"flex flex-col h-screen bg-black text-white",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center px-5 py-2 bg-black",children:[(0,a.jsx)("div",{className:"text-sm font-medium",children:b}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(n.A,{className:"h-4 w-4"}),(0,a.jsx)("div",{className:"text-sm",children:"8%"}),(0,a.jsx)(o.A,{className:"h-4 w-4"})]})]}),(0,a.jsxs)("div",{className:"flex items-center px-4 py-2 bg-gray-900 border-b border-gray-800",children:[(0,a.jsx)("button",{onClick:()=>e.back(),className:"mr-2 p-2 -ml-2 rounded-full hover:bg-gray-800 transition-colors","aria-label":"Go back",children:(0,a.jsx)(i.A,{className:"h-5 w-5 text-blue-500"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"font-semibold text-sm",children:"Upload Screenshots"}),(0,a.jsx)("div",{className:"text-xs text-gray-400",children:"Start a conversation"})]})]}),(0,a.jsx)("div",{className:"flex-1 p-4 overflow-y-auto bg-black",children:(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"Upload Text Message Screenshots"}),(0,a.jsx)("p",{className:"text-sm text-gray-400 mb-4",children:"Upload screenshots of text conversations to analyze the communication style."}),(0,a.jsxs)("div",{className:"border-2 border-dashed border-gray-700 rounded-lg p-4 mb-4 text-center cursor-pointer hover:border-blue-500 transition-colors",onClick:()=>{var e;return null===(e=v.current)||void 0===e?void 0:e.click()},children:[(0,a.jsx)("input",{type:"file",accept:"image/*",multiple:!0,onChange:e=>{if(e.target.files){let t=Array.from(e.target.files);r(e=>[...e,...t])}},className:"hidden",ref:v}),(0,a.jsx)(d,{className:"h-8 w-8 mx-auto mb-2 text-gray-400"}),(0,a.jsx)("p",{className:"text-sm text-gray-400",children:"Tap to select images"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"or drag and drop"})]}),t.length>0&&(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsxs)("h3",{className:"text-sm font-medium mb-2",children:["Selected Images (",t.length,")"]}),(0,a.jsx)("div",{className:"grid grid-cols-3 gap-2",children:t.map((e,t)=>(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsx)("img",{src:URL.createObjectURL(e),alt:"Preview ".concat(t+1),className:"w-full h-24 object-cover rounded-lg"}),(0,a.jsx)("button",{onClick:()=>N(t),className:"absolute top-1 right-1 bg-black bg-opacity-50 rounded-full p-1 text-white opacity-0 group-hover:opacity-100 transition-opacity","aria-label":"Remove image",children:(0,a.jsx)(m,{className:"h-4 w-4"})})]},t))})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{htmlFor:"context",className:"block text-sm font-medium mb-2",children:"Additional Context (Optional)"}),(0,a.jsx)("textarea",{id:"context",value:c,onChange:e=>u(e.target.value),placeholder:"Add any additional context about the conversation...",className:"w-full bg-gray-800 border border-gray-700 rounded-lg p-3 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3})]}),p&&(0,a.jsxs)("div",{className:"mb-4 p-3 bg-red-900 bg-opacity-20 border border-red-800 rounded-lg flex items-start",children:[(0,a.jsx)(x,{className:"h-5 w-5 text-red-500 mr-2 flex-shrink-0 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-red-400",children:p}),(0,a.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"If this error persists, please contact support."})]})]}),(0,a.jsx)("button",{onClick:k,disabled:h||0===t.length,className:"w-full py-3 px-4 rounded-full font-medium text-sm ".concat(h||0===t.length?"bg-gray-700 text-gray-400 cursor-not-allowed":"bg-blue-500 text-white hover:bg-blue-600"," transition-colors"),children:h?"Processing...":"Start Conversation"})]})}),(0,a.jsx)("div",{className:"py-1 flex justify-center bg-black",children:(0,a.jsx)("div",{className:"w-24 h-1 bg-gray-600 rounded-full"})})]})}},5695:(e,t,r)=>{"use strict";var a=r(8999);r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}})},6517:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(9946).A)("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]])},9946:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var a=r(2115);let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),l=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=(0,a.forwardRef)((e,t)=>{let{color:r="currentColor",size:s=24,strokeWidth:o=2,absoluteStrokeWidth:i,className:c="",children:d,iconNode:m,...x}=e;return(0,a.createElement)("svg",{ref:t,...n,width:s,height:s,stroke:r,strokeWidth:i?24*Number(o)/Number(s):o,className:l("lucide",c),...x},[...m.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(d)?d:[d]])}),i=(e,t)=>{let r=(0,a.forwardRef)((r,n)=>{let{className:i,...c}=r;return(0,a.createElement)(o,{ref:n,iconNode:t,className:l("lucide-".concat(s(e)),i),...c})});return r.displayName="".concat(e),r}}},e=>{var t=t=>e(e.s=t);e.O(0,[441,684,358],()=>t(3391)),_N_E=e.O()}]);